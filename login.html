<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>Login Window</title>
                <script type="text/javascript" src="config.json"></script>
		<script type='text/javascript'>//<![CDATA[ 

			var conf = config;

			window.onload = function() {
				var target = window.self === window.top ? window.opener : window.parent;
				var hash = window.location.hash;
				var search = window.location.search;
				if (search) {
				    var searchParams = new URLSearchParams(search.replace(/^\?/, ''));
				    var code = searchParams.get('code');
				    if (code) {
				        target.postMessage({ type: 'auth_code', code: code }, "*"); //validate origin in opener
				        return;
				    }
				}
				if (hash) {
				    var hashParams = new URLSearchParams(hash.replace(/^#/, ''));
				    var token = hashParams.get('access_token');
				    if (token) {
				        target.postMessage(token, "*"); //embedded; validate origin in opener
				    } else {
				        console.log("No access_token in hash", hash);
				    }
				}
			}
		</script>
	</head>
	<body>
	  
	</body>
</html>


